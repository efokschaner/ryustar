apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: ryustar-ingress
  annotations:
    kubernetes.io/ingress.allow-http: "false"
    kubernetes.io/tls-acme: "true"
    kubernetes.io/ingress.class: "gce"
spec:
  backend:
    serviceName: websocket-service
    servicePort: 9091
  # todo https://danrl.com/blog/2017/google-kubernetes-engine-and-lets-encrypt/
  # tls:
  # - hosts:
  #   - test.danrl.com
  #     secretName: test-danrl-com-certificate

---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: ryustar-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    # Increase these for websockets
    nginx.ingress.kubernetes.io/proxy-read-timeout: 3600
    nginx.ingress.kubernetes.io/proxy-send-timeout: 3600
spec:
  backend:
    serviceName: websocket-service
    servicePort: 9091
